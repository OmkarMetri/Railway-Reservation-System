CREATE TABLE USERS(Name VARCHAR(20)NOT NULL,Password VARCHAR(20)NOT
NULL,Email_Id VARCHAR(30)PRIMARY KEY NOT NULL,DOB DATE,Gender CHAR(1),Age
INT NOT NULL,Mobile VARCHAR(20)NOT NULL,City VARCHAR(20)NOT NULL,State
VARCHAR(15)NOT NULL,Security_Question VARCHAR(40)NOT NULL,Security_Answer
VARCHAR(20)NOT NULL);

CREATE TABLE STATION(Station_id VARCHAR(10) PRIMARY KEY NOT NULL,Station_name
VARCHAR(30));

CREATE TABLE TRAIN(Train_id INT PRIMARY KEY NOT NULL,Train_name
VARCHAR(30),Train_type VARCHAR(20)NOT NULL,Source_station
VARCHAR(40) NOT NULL,Destination_station VARCHAR(40)NOT NULL,Source_id VARCHAR(10) NOT
NULL,Destination_id VARCHAR(10) NOT NULL,FOREIGN KEY (Source_id) REFERENCES
STATION(Station_id) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN
KEY(Destination_id) REFERENCES STATION(Station_id) ON UPDATE NO ACTION ON DELETE
NO ACTION);

CREATE TABLE TRAIN_CLASS( Train_ID INT NOT NULL,FOREIGN KEY(Train_ID) REFERENCES
TRAIN(Train_id) ON UPDATE CASCADE ON DELETE CASCADE,Fare_class1 VARCHAR(5) NOT
NULL,Seat_class1 VARCHAR(5) NOT NULL,Fare_class2 VARCHAR(5) NOT NULL,Seat_class2 VARCHAR(5) NOT
NULL,Fare_class3 VARCHAR(5) NOT NULL,Seat_class3 VARCHAR(5) NOT NULL);

CREATE TABLE DAYS_AVAILABLE(Train_ID INT NOT NULL,FOREIGN KEY(Train_ID) REFERENCES
TRAIN(Train_id) ON UPDATE CASCADE ON DELETE CASCADE,Available_days
VARCHAR(20));

CREATE TABLE Passenger (PNR VARCHAR(25)PRIMARY KEY NOT NULL, Seat_number INT
NOT NULL, Passenger_name VARCHAR(30)NOT NULL, Age INT NOT NULL, Gender
VARCHAR(8)NOT NULL, Train_ID INT NOT NULL,FOREIGN KEY(Train_ID) REFERENCES
TRAIN(Train_id) ON UPDATE CASCADE ON DELETE CASCADE);


CREATE TABLE Passenger_ticket(PNR VARCHAR(25)NOT NULL, Source_id VARCHAR(10) NOT NULL,
Destination_ID VARCHAR(10) NOT NULL, Class_type VARCHAR(50)NOT NULL, Reservation_status
VARCHAR(25)NOT NULL, Train_ID INT NOT NULL,FOREIGN KEY(Train_ID) REFERENCES
TRAIN(Train_id) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY(PNR)
REFERENCES Passenger(PNR) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN
KEY(Source_id) REFERENCES STATION(Station_id),FOREIGN KEY(Destination_ID)
REFERENCES STATION(Station_id) ON UPDATE NO ACTION ON DELETE NO ACTION);

CREATE TABLE Train_status (Train_ID INT NOT NULL, Available_Date date PRIMARY
KEY NOT NULL , Booked_seats INT NULL, Waiting_seats INT NULL, Available_seats INT
NULL,FOREIGN KEY(Train_ID) REFERENCES TRAIN(Train_id) ON UPDATE CASCADE ON
DELETE CASCADE);


CREATE TABLE Reservation (Train_ID INT NOT NULL, Available_Date date NOT
NULL, Email_ID VARCHAR(30)NOT NULL, PNR VARCHAR(20)NOT NULL, Reservation_Date
DATE NOT NULL, Reservation_Status VARCHAR(20)NULL,FOREIGN KEY(Train_ID)
REFERENCES TRAIN(Train_id) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN
KEY(Available_Date) REFERENCES Train_status(Available_Date)ON UPDATE CASCADE ON
DELETE CASCADE,FOREIGN KEY(Email_ID) REFERENCES Users(Email_id) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN KEY(PNR) REFERENCES Passenger(PNR));

CREATE TABLE Route(Train_ID INT NOT NULL, Stop_number INT PRIMARY KEY NOT NULL,
Station_ID VARCHAR(10) NOT NULL,Arrival_time time NOT NULL,Departure_time
time NOT NULL,Source_distance INT NOT NULL,FOREIGN KEY(Train_ID)
REFERENCES TRAIN(Train_id) ON UPDATE CASCADE ON DELETE CASCADE,FOREIGN
KEY(Station_ID) REFERENCES Station(Station_id) ON UPDATE CASCADE ON DELETE
CASCADE);

CREATE TABLE Route_HAS_Station(Train_ID INT NOT NULL,Station_ID VARCHAR(10) PRIMARY KEY
NOT NULL, Stop_number INT NOT NULL,FOREIGN KEY(Train_ID) REFERENCES
TRAIN(Train_id));


CREATE TABLE Admin(User_ID VARCHAR(20)PRIMARY KEY NOT NULL, Password
VARCHAR(15)NOT NULL);